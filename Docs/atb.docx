Атб шкала.

Назначение.

	Создание атб шкалы обосновано необходимостью упорядочивания пошаговых ходов персонажа и вражеских юнитов. Главная задача шкалы — показать пользователю очередность, в которой будут действовать юниты. Также следует учитывать количество ходов, которые сможет видеть игрок.

Функционал.

	Атб шкала управляет очередностью действий юнитов. Игрок никакими средствами не может повлиять напрямую на шкалу и изменить очерёдность ходов.
	При нааведении курсора мыши на иконку с юнитом, игра должна каким-либо способом показать игроку, связанного с этой иконкой юнита (например, выделить клетку на поле, на которой находится юнит).

Принцип работы.

	В момент начала боя (после инициализации необходимых компонентов) генерируется дэк из участников боевки (юнитов) в количестве, достаточном, чтобы заполнить шкалу. После генерации, управление передаётся первому юниту в дэке. По окончании хода, первый юнит дэка удаляется, а в конец помещается новый, выбранный по определённому правилу, юнит. Затем процесс повторяется.
	Если во время действия юнита погибает (или прекращает активность) другой юнит (или он сам) это тут же отражается на шкале, а именно из дэка удаляются неактивные юниты, и генерируются новые.
	Если во время действия юнита на поле появляется (призывается) новый юнит, то происходит «вставка» ходов нового юнита между ходами, имеющимися в шкале (всё так же согласно определённому правилу). При этом ходы юнитов, которые визуально не вмещаются на шкале, не удаляются, а просто не показываются.
	Если во время действия юнита происходит событие, которое влияет на правило появления юнита(-ов) на шкале, то никакого «перераспределения» сгенерированных ходов не происходит. Событие повлияет только на следующие генерации ходов юнитов.

Внешний вид.

	Шкала представляет собой вытянутый по горизонтали прямоугольник, расположенный по-центру в нижней части экрана. Находится над панелью быстрого доступа (та, что снизу). Содержит в себе квадратные иконки участвующих в боевке юнитов (размер шкалы по горизонтали позволяет вместить в себя целое число иконок).
	По окончании очередного хода, крайняя левая иконка исчезает (может «выезжать» из шкалы вверх/вниз или влево) а остальные иконки (вместе с единственной новой справа) плавно сдвигаются влево.

Правило добавления юнитов.

	Каждый юнит, участвующий в боёвке имеет характеристику, выражающую относительную частоту появления на атб-шкале (далее просто «частота»). Частота юнита определяется его [[силой, ловкостью…? Надо продумать]], и принимает значения от 1.0 (по-умолчанию) до 2.0[[?]] (максимальное улучшение независимых характеристик).
	Генерация нового юнита в шкале происходит случайно согласно вероятности появления i-го юнита, которая рассчитывается по формуле:

	

	где - частота i-го юнита, участвующего в боевке, - вероятность появления k-го юнита.
